package pkg

import (
	"github.com/smartwalle/alipay/v3"
)

func AiLiPay(subject string, tradeNo string, amount string) (string, error) {
	//appid := "9021000136658868"
	appid := "9021000135687187"
	privateKey := "MIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQC/M4VZGA3q0Cz5AM/2IPzzydrSyk5ukhAYF8Dt+DoL92AakJY9hPbD+LV1/MY+Xceg4B9TnNLEYRzKELl4Igp/LF3YsAYnIsEx7uCmvhfnDblZB1t8WtffsrN5oUjjL4NRsk97YIN09cMV7o9zSnmSygwaQcwsWFsowO/A+IW14dCdEbR+JRzmkQxHJevlvglBMrB+bsEOL7ZrlClCtYNCEbZKNAHbbf8JqI55LQjA4U2SeMNtx3QieivZW2kesEtcZ+NkzcSpyf+l25ZS6DymaXmDa9f2IyzXOYmZRJSipJAZT0NBLXfffsXKELCQPn806MTcrxT9hGUlDUvgfEufAgMBAAECggEAF21ao2X9Ho5PVFszH/c+xygudbFwFsAy1KDkdMP7aMfwsJCSuAr4qV5p7YEBUVbwRNfxPq9ya7lya5fNAdk57AcloI1A077AaTvZrtSP3TGjSjNKlFwVI0WkE/0dDykdL/9nGbjjoosSUjeewAOaDdBP10/EkpJo6P9q4PwSdgx06XUN6eVQGtvgy3dzzwDQp9TRW948xK3dLqu3ukDhvr3Zc/q6DJ8pz5SLzN1z5uN95VBbtRw9IEcfll8HaU/YNNeYBQ/csGfZ9M/D9HPldM9yYuiYhCXB0b17GHp6dP6M+DtGGcKfyA3irhvMKS5NOc14YZ3pD4VYCYKT1DnKIQKBgQDesqPvt3p7L0E6CrPADgJN0FPGgvzwryw1d9gwS2V2yerIi40Q/Xs5wPMErMJbXhVAZQXp4BKiMYmS0rXDXbmFDvuJRZzSH4KAezEAkeua0oihiSaJjJc3iERT856h01IFOJ6mcYgDuYAiWcb1PcfkNzH0vk4bomj4pRj+Ycu9BwKBgQDbyx+N2P2VqOcCZYAHzaOkNhmZjs8Taxusa4MmHBVTMTL5KdQVKu7NvZJMWg2wf9PeepdaLRw7k5X/cSv/pVDBsJPrih861iM0i5d++/htRCHnx2wHCkd6504Qy2iEVDtVrRl9FsfFjKkMQwCnNMy7wsbf9eGfN1MJlFaUTsDuqQKBgGCONdQWyk0ktPQ0dbEcodUZMWmNm5vDZ7ibCKoP1qNFcr2W/AfUz5u/095ABVjWFwK/imvX0lxufAajw1k8htZxI5BmFVNphAyu3RUxL2UGSWU4cPQMd/gE5hM8OphRZmuLHAZwjReIU00RfdkQ+10wrUE/TeBfb4H3GzoYLtz7AoGAWEG8Le1QBmSIPoIbYwbECxBePzcFF7sOpbGWPBtSxNEgssSFEOrocV0J/fa7QIBTxyZa2C79Az9EIAqFrGXpg50wCIix+aI7CMJ01ty+6MFPDA8b5cfO5B81TbEgCuL34HNdpMkc9sqApxfQj1O4UjzoNs45BwHkKhiSm4L0HeECgYAr8KgqW+3FPaowiQxTmsP6LvZAU8p7OfTlBmGv+K5Q+FeCVzP/Xj5OZYCBJVtnq6zSPJxJYv2bulBGbYjR29wim5AMebW1bUALY6ZoMz4R8cXwvpHgLthikJVujvNmeG1mTwYb3AD84ckNKjG6/7gQDcSP/fw6umbIa9A45bQRwQ=="
	//var privateKey = "MIIEpAIBAAKCAQEApDgRv2Pdfs1fI1hRkcwYXAmXzBBhPpjdVB9pj0dfIVC7OmyfmmlV9axjt3LI7n+JGzG06poclBGacX8znQ9n53VuXepz66UyO9ILGtv6ToYLsxA5216GAoR8cNz47dm27maq0TT7vJkuNYeWBHatCdeXzyBFd5+XPKBhNLuGoNTr9Naw2r3+D/xTL9OxZDBYKAjtuLIzhjzjEA8kRxsvJhwcTCsfZxfKabH1vYmW81e2VCfhJS1VdsB+CylK1azQQEpN7DyM4vAHd65Ykj7SyKh9EvxzObsvd4hTfez7bHUYFavB/XTxPuSkyytWhFPCM7F9yOhDAwZtPPYahy2eUQIDAQABAoIBAC5QTdkPXiFr5EAAoYif6eLTJcd8eyB/VjRqY4fwFgk8ToFsrxqKSJ7vznOnYLm6qD1OKHrdmd+8kzUdLb5G4QPrH4RHIgg8X811MIKTtaU9ssD+e4K9xseg+8OM3nueIjRcKiK0cabAAMNCCPIbUjPrZLoanNze2nVTufZ4SMDEt7m8EPrFae/qLYKiF3wKeyCW0DkNzgh5FM6SKZKOsAJmNXta2fF4gpNWzNQD0BgvpegowtbLEGKL2/tsWX4tj68b0g4xLCfffZM60Qh4obi1klEhXJvW7rt80G7K6KSr1yfPN9aXG6i+gph1/jiSMZzqfkC6yhhmLf+sOSp5icECgYEA46se0uWhDuwoRVFBvFtSrw6kWAoRLxwBLPyv21FhE0++DL1fjXpJAArekxEs210TSWt2JGyaeUFTT/TbqBrTb7nnu7he9RWThwslEV1cOaF7EYIpQYDMg/wjmBGptR7rfMtKzWWkP+VHme5n3p1synWu4U1xdQMGSN5wy56KerkCgYEAuKegwR9y4YUyO20x5uCk8K2NoGP1zyfcGM6sf/prMbhWHLjMoePo0Kkg+VehI6Hnw4wCymzlQTZg+GmKYqnovT7FSCS5SSwB1GPVKWj3yXWGqLTMofbvDLwfmuSz3B3NQVJ2WHjcJMvreTXQhR8WlVwyL4RM1wOcmzygFWfGlFkCgYEAi59mR/CL1Zr/F4O9zMY07ycLovKJl1qVXgGZ1+cQocdFxopdD2bvXhdMaOUfnWh3a4975Nq14acucNq5216YTOy2MWng0m1pDGjJUtzusmlWEGbC5mkXA9qd+aTbbziHMwF53n13PbhfMQgEq4HgNkn19jaIXjp8oDPK+RVB2AECgYADwu5kYLafX245hazpjhPuDyr+ZGricGZsXvFmnfxHBAFFDoKknZblgTx5t85Bgo/NDPIVm4hD/s6U4Nl/zwQ9rqSoJo9brTjQUcRK1qeNhAZdM2mjtvsBoGdoaVY8mqLOvNZKURPy7/B5BJ6dx5dXLYycKS7DhoBPLTn5laaW6QKBgQCdHp4RApdz6IhQparkB+O9b+q8lA3YCaUvBtpWnIIHGfPCo7b4VpdGCta1gULuxtF0udYOaVdLTuRpC3eMTPTr1FlysJlU+3uA4F4TSYsd6Kj8zXszdev3nvHdN57OPVMajIu3cgMZ7/9rBXHXrG/i5fSm38CSf0bPvqIlbvW8mA==" // 必须，上一步中使用 RSA签名验签工具 生成的私钥
	client, err := alipay.New(appid, privateKey, false)

	if err != nil {

		return "", err
	}

	var p = alipay.TradeWapPay{}
	p.NotifyURL = "https://www.baidu.com"
	p.ReturnURL = "http://67b8889c.r20.cpolar.top"
	p.Subject = subject
	p.OutTradeNo = tradeNo
	p.TotalAmount = amount
	p.ProductCode = "QUICK_WAP_WAY"

	url, err := client.TradeWapPay(p)
	if err != nil {
		return "", err
	}

	// 这个 payURL 即是用于打开支付宝支付页面的 URL，可将输出的内容复制，到浏览器中访问该 URL 即可打开支付页面。
	var payURL = url.String()
	return payURL, nil
}
